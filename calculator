 
<!-- 
This webpage is a basic calculator.
This code was assembled and written by Claive Alvin P. Acedilla. It can be copied, modified and redistributed.
November 2019
-->
		
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<meta http-equiv="Content-type" content="text/html; charset=UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1">
		<title>Basic Calculator</title>
	</head>

	<body>
		<h1>Basic Calculator</h1>
		
		<i>Enter equation by keypad:</i>
		<br>
		<br>
		<input type="text" id="txtInputAndResult">
		<br>
		<br>
		<input type="button" id="btnMemoryClear" value="MC" onclick="memoryClear()"><input type="button" id="btnMemoryRecall" value="MR" onclick="memoryRecall()"><input type="button" id="btnMemorySubtraction"value="M-" onclick="memorySubstraction()"><input type="button" id="btnMemoryAddition"value="M+" onclick="memoryAddition()"><br>
		<input type="button" id="btnClear" value="C" onclick="Clear()"><input type="button" id="btnChangeSign" value="+/-" onclick="changeSign()"><input type="button" id="btnSquareRoot" value="SQRT" onclick="computeSquareRoot()"><input type="button" id="btnPercentage" value="%" onclick="computePercentage()"><br>
		<input type="button" id="btnSeven" value="7" onclick="displayCalculation(this)"><input type="button" id="btnEight" value="8" onclick="displayCalculation(this)"><input type="button" id="btnNine" value="9" onclick="displayCalculation(this)"><input type="button" id="btnDivision" value=" / " onclick="displayCalculation(this)"><br>
		<input type="button" id="btnFour" value="4" onclick="displayCalculation(this)"><input type="button" id="btnFive" value="5" onclick="displayCalculation(this)"><input type="button" id="btnSix"  value="6" onclick="displayCalculation(this)"><input type="button" id="btnMultiplication" value=" x " onclick="displayCalculation(this)"><br>
		<input type="button" id="btnOne" value="1" onclick="displayCalculation(this)"><input type="button" id="btnTwo" value="2" onclick="displayCalculation(this)"><input type="button" id="btnThree" value="3" onclick="displayCalculation(this)"><input type="button" id="btnSubtraction"  value=" - " onclick="displayCalculation(this)"><br>
		<input type="button" id="btnZero" value="0" onclick="displayCalculation(this)"><input type="button" id="btnDecimal" value="." onclick="displayCalculation(this)"><input type="button" id="btnEquals" value=" = " onclick="displayCalculation(this)"><input type="button" id="btnAddition" value=" + " onclick="displayCalculation(this)"><br>
	
		<script type="text/javascript">	
		
		var key;
		var inputString;
		
		key = document.getElementById("txtInputAndResult");
		inputString = document.getElementById("txtInputAndResult").value;

		// Input typing catches
		key.addEventListener("keyup", function(event) 
			{
			  // Number 13 is the "Enter" key on the keyboard
			  if (event.keyCode === 13) 
				  {
				    // Cancel the default action, if needed
				    event.preventDefault();
				    // Trigger the button element with a click
				    document.getElementById("btnEquals").click();
				  }
			  
			  if (event.keyCode === 48 || event.keyCode === 96) 
			  	{
				  	inputString = document.getElementById("txtInputAndResult").value; 
					inputString = inputString.substring(0, inputString.length - 1);
					document.getElementById("txtInputAndResult").value = inputString;
				  	document.getElementById("btnZero").click();
				}
			  
			  if (event.keyCode === 49 || event.keyCode === 97) 
			  	{
				  	inputString = document.getElementById("txtInputAndResult").value; 
					inputString = inputString.substring(0, inputString.length - 1);
					document.getElementById("txtInputAndResult").value = inputString;
				  	document.getElementById("btnOne").click();
				}
			  
			  if (event.keyCode === 50 || event.keyCode === 98) 
			  	{
				  	inputString = document.getElementById("txtInputAndResult").value; 
					inputString = inputString.substring(0, inputString.length - 1);
					document.getElementById("txtInputAndResult").value = inputString;
				  	document.getElementById("btnTwo").click();
				}
			  
			  if (event.keyCode === 51 || event.keyCode === 99) 
			  	{
				  	inputString = document.getElementById("txtInputAndResult").value; 
					inputString = inputString.substring(0, inputString.length - 1);
					document.getElementById("txtInputAndResult").value = inputString;
				  	document.getElementById("btnThree").click();
				}
			  
			  if (event.keyCode === 52 || event.keyCode === 100) 
			  	{
				  	inputString = document.getElementById("txtInputAndResult").value; 
					inputString = inputString.substring(0, inputString.length - 1);
					document.getElementById("txtInputAndResult").value = inputString;
				  	document.getElementById("btnFour").click();
				}
			  
			  if (event.keyCode === 53 || event.keyCode === 101) 
			  	{
				  	inputString = document.getElementById("txtInputAndResult").value; 
					inputString = inputString.substring(0, inputString.length - 1);
					document.getElementById("txtInputAndResult").value = inputString;
				  	document.getElementById("btnFive").click();
				}
			  
			  if (event.keyCode === 54 || event.keyCode === 102) 
			  	{
				  	inputString = document.getElementById("txtInputAndResult").value; 
					inputString = inputString.substring(0, inputString.length - 1);
					document.getElementById("txtInputAndResult").value = inputString;
				  	document.getElementById("btnSix").click();
				}
			  
			  if (event.keyCode === 55 || event.keyCode === 103) 
			  	{
				  	inputString = document.getElementById("txtInputAndResult").value; 
					inputString = inputString.substring(0, inputString.length - 1);
					document.getElementById("txtInputAndResult").value = inputString;
				  	document.getElementById("btnSeven").click();
				}
			  
			  if (event.keyCode === 56 || event.keyCode === 104) 
			  	{
				  	inputString = document.getElementById("txtInputAndResult").value; 
					inputString = inputString.substring(0, inputString.length - 1);
					document.getElementById("txtInputAndResult").value = inputString;
				  	document.getElementById("btnEight").click();
				}
			  
			  if (event.keyCode === 57 || event.keyCode === 105) 
			  	{
				  	inputString = document.getElementById("txtInputAndResult").value; 
					inputString = inputString.substring(0, inputString.length - 1);
					document.getElementById("txtInputAndResult").value = inputString;
				  	document.getElementById("btnNine").click();
				}
			  
			  if (event.keyCode === 191 || event.keyCode === 111) 
				  {
				  	inputString = document.getElementById("txtInputAndResult").value; 
					inputString = inputString.substring(0, inputString.length - 1);
					document.getElementById("txtInputAndResult").value = inputString;
					document.getElementById("btnDivision").click();
				  }
			  
			  if (event.keyCode === 88 || event.keyCode === 106) 
				  {
				  	inputString = document.getElementById("txtInputAndResult").value; 
					inputString = inputString.substring(0, inputString.length - 1);
					document.getElementById("txtInputAndResult").value = inputString;
					document.getElementById("btnMultiplication").click();
				  }
			 
			  if (event.keyCode === 189 || event.keyCode === 109) 
				  {
				  	inputString = document.getElementById("txtInputAndResult").value; 
					inputString = inputString.substring(0, inputString.length - 1);
					document.getElementById("txtInputAndResult").value = inputString;
					document.getElementById("btnSubtraction").click();
				  }
			  
			  if (event.keyCode === 187) 
				  {
				  	inputString = document.getElementById("txtInputAndResult").value; 
					inputString = inputString.substring(0, inputString.length - 1);
					document.getElementById("txtInputAndResult").value = inputString;
					document.getElementById("btnAddition").click();
				  }
			  
			  if (event.keyCode === 190) 
				  {
				  	inputString = document.getElementById("txtInputAndResult").value; 
					inputString = inputString.substring(0, inputString.length - 1);
					document.getElementById("txtInputAndResult").value = inputString;
					document.getElementById("btnDecimal").click();
				  }
			});
				
		function memoryClear()
			{
				document.getElementById("txtInputAndResult").value = "";
			}
		
		function Clear()
			{
				var inputString;
				var lastNumber;
				
				inputString = document.getElementById("txtInputAndResult").value
				lastNumber = inputString[inputString.length - 1];
				if (lastNumber == " ")
					{
						inputString = inputString.substring(0, inputString.length - 3);
					}
				else
					{
						inputString = inputString.substring(0, inputString.length - 1);
					}	
				
				document.getElementById("txtInputAndResult").value = inputString;
			}
		
		function changeSign()
			{
				var inputString;
				var lastNumber;
				
				inputString = document.getElementById("txtInputAndResult").value;
				inputString = inputString.split(" ");
				lastNumber = inputString[inputString.length - 1];
				lastNumber = parseFloat(lastNumber);
				if (Math.sign(lastNumber) == -1)
					{
						lastNumber = lastNumber * -1;
						inputString = inputString.join(" ");
						inputString = inputString.substring(0, inputString.length - 2);
						document.getElementById("txtInputAndResult").value = inputString + lastNumber;
					}
				else
					{
						lastNumber = lastNumber * -1;
					}  
				inputString = inputString.join(" ");
				inputString = inputString.substring(0, inputString.length - 1);
				document.getElementById("txtInputAndResult").value = inputString + lastNumber;
			}
		
		function computeSquareRoot()
			{
				var inputString;
				inputString = document.getElementById("txtInputAndResult").value;
				inputString = inputString.split(" ");
				lastNumber = inputString[inputString.length - 1];
				lastNumber = parseFloat(lastNumber);
				lastNumber = Math.sqrt(lastNumber);
				inputString = inputString.join(" ");
				document.getElementById("txtInputAndResult").value = lastNumber;
			}
		
		function memorySubstraction()
			{
				var inputString;
				var lastNumber;
				var result;
				
				inputString = document.getElementById("txtInputAndResult").value;
				inputString = inputString.split(" ");
				lastNumber = inputString[inputString.length - 1];
				lastNumber = parseFloat(lastNumber);				
				if (Number.isNaN(lastNumber))
					{
						lastNumber = inputString[inputString.length - 3];
						lastNumber = parseFloat(lastNumber);
					}
				inputString = inputString.join(" ");
				document.getElementById("txtInputAndResult").value = inputString + " - " + lastNumber;	
			}
		
		function memoryAddition()
			{
				var inputString;
				var lastNumber;
				var result;
				
				inputString = document.getElementById("txtInputAndResult").value;
				inputString = inputString.split(" ");
				lastNumber = inputString[inputString.length - 1];
				lastNumber = parseFloat(lastNumber);				
				if (Number.isNaN(lastNumber))
					{
						lastNumber = inputString[inputString.length - 3];
						lastNumber = parseFloat(lastNumber);
					}
				inputString = inputString.join(" ");
				document.getElementById("txtInputAndResult").value = inputString + " + " + lastNumber;			
			}
		
		function computePercentage()
			{	
				var inputString;
				var lastNumber;
				var result;
				
				inputString = document.getElementById("txtInputAndResult").value;
				inputString = inputString.split(" ");
				lastNumber = inputString[inputString.length - 1];
				lastNumber = parseFloat(lastNumber);
				lastNumber = lastNumber / 100;
				inputString = inputString.join(" ");
				inputString = inputString.substring(0, inputString.length - 1);
				document.getElementById("txtInputAndResult").value = inputString + lastNumber;
			}
		
		function memoryRecall()
			{
				var inputString;
				var lastNumber;
				
				inputString = document.getElementById("txtInputAndResult").value;
				inputString = inputString.split(" ");
				lastNumber = inputString[inputString.length - 1];
				lastNumber = parseFloat(lastNumber);				
				if (Number.isNaN(lastNumber))
					{
						lastNumber = inputString[inputString.length - 3];
						lastNumber = parseFloat(lastNumber);
					}
				inputString = inputString.join(" ");				
				document.getElementById("txtInputAndResult").value = inputString + lastNumber;								
			}
		
		function calculate(inputString)
			{
				var result;
				var ctr;
				
				ctr = 0;		
				inputString = inputString.split(" ");
				// Parse equation from the left	
				result= inputString[0];	
				result = parseFloat(result);												
				
				while (ctr < inputString.length)
					{
						var operand;
						var operator;
	
						operator = inputString[ctr + 1];
						operand = inputString[ctr + 2];
						operand = parseFloat(operand);								
						
						if (Number.isNaN(result))
							{
								result = 0;
							}	
	
						if (Number.isNaN(operand))
							{	
								operand = 0;	
							}	
						
						if (operator == "/")
							{
								result = result / operand;
							}
						
						if (operator == "x")
							{
								result = result * operand;
							}
						
						if (operator == "-")
							{
								result = result - operand;
							}
						
						if (operator == "+")
							{
								result = result + operand;
							}
							
						ctr = ctr + 2;
					}
				
				inputString = inputString.join(" ");
				document.getElementById("txtInputAndResult").value = inputString + result;			
			}				
		
		function displayCalculation(element) 
			{
				var inputString;
				var elementValue;
				var equals;
				var division;
				var multiplication;
				var addition;
				var subtraction;
				var lastOperator;

				elementValue = element.value;
				inputString = document.getElementById("txtInputAndResult").value;
				
				division = document.getElementById("btnDivision").value;
				multiplication = document.getElementById("btnMultiplication").value;
				subtraction = document.getElementById("btnSubtraction").value;
				addition = document.getElementById("btnAddition").value;
				
				lastOperator = inputString[inputString.length - 1];
				//alert(lastOperator);
				if (lastOperator == " ")
					{
						lastOperator = inputString[inputString.length - 2];
					}
				
				if (lastOperator == "/" || lastOperator == "x" || lastOperator == "-" || lastOperator == "+")
					{	
						if (elementValue == division || elementValue == multiplication || elementValue == subtraction || elementValue == addition)
							{
								inputString = inputString.substring(0, inputString.length - 3);
								document.getElementById("txtInputAndResult").value = inputString + elementValue;
							}
					}
					
						
				inputString = inputString + elementValue;				
				
				document.getElementById("txtInputAndResult").value = inputString;
				equals = document.getElementById("btnEquals").value;
				
				// Call calculate function when input is the equals character " = "
				if (elementValue == equals)
					{			
						calculate(inputString);	
					}					
			}
		</script>		
	</body>
</html>

