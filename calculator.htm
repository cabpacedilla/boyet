	 
<!-- 
This webpage is a basic calculator.
This code was assembled and written by Claive Alvin P. Acedilla. It can be copied, modified and redistributed.
November 2019
-->
			
<!DOCTYPE html>
<html>
	<head>
	<style>
	#txtInputAndResult
	{
    width: 280px;
	  height: 50px;
	  text-align: left;
	  font-size: large;
	  box-sizing: border-box;
	}
   	
	input
	{
	  width: 70px;
	  height: 40px;
	  text-align: center;
	  font-size: medium;
	  box-sizing: border-box;
	}
	</style>
		<meta http-equiv="Content-type" content="text/html; charset=UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1">
		<title>Basic Calculator</title>
	</head>

<body>
<h1>Basic Calculator</h1>
			
<i>Enter equation by clicking the buttons or by numpad:</i>
<br>
<br>
<input type="text" id="txtInputAndResult" rows="2" onkeypress="return restrictAlphaSymbols()" onmousedown="return false" onselectstart="return false" >
<br>
<br>
<input type="button" id="btnMemoryClear" value="MC" onclick="memoryClear()"><input type="button" id="btnMemoryRecall" value="MR" onclick="memoryRecall()"><input type="button" id="btnMemorySubtraction"value="M-" onclick="memorySubstraction()"><input type="button" id="btnMemoryAddition"value="M+" onclick="memoryAddition()"><br>
<input type="button" id="btnClear" value="C" onclick="Clear()"><input type="button" id="btnChangeSign" value="+/-" onclick="changeSign()"><input type="button" id="btnSquareRoot" value="SQRT" onclick="computeSquareRoot()"><input type="button" id="btnPercentage" value="%" onclick="computePercentage()"><br>
<input type="button" id="btnSeven" value="7" onclick="displayCalculation(this)"><input type="button" id="btnEight" value="8" onclick="displayCalculation(this)"><input type="button" id="btnNine" value="9" onclick="displayCalculation(this)"><input type="button" id="btnDivision" value=" / " onclick="displayCalculation(this)"><br>
<input type="button" id="btnFour" value="4" onclick="displayCalculation(this)"><input type="button" id="btnFive" value="5" onclick="displayCalculation(this)"><input type="button" id="btnSix"  value="6" onclick="displayCalculation(this)"><input type="button" id="btnMultiplication" value=" x " onclick="displayCalculation(this)"><br>
<input type="button" id="btnOne" value="1" onclick="displayCalculation(this)"><input type="button" id="btnTwo" value="2" onclick="displayCalculation(this)"><input type="button" id="btnThree" value="3" onclick="displayCalculation(this)"><input type="button" id="btnSubtraction"  value=" - " onclick="displayCalculation(this)"><br>
<input type="button" id="btnZero" value="0" onclick="displayCalculation(this)"><input type="button" id="btnDecimal" value="." onclick="displayCalculation(this)"><input type="button" id="btnEquals" value=" = " onclick="displayCalculation(this)"><input type="button" id="btnAddition" value=" + " onclick="displayCalculation(this)"><br>
		
<script type="text/javascript">			
let key;
let inputString;

memoryClear();
key = document.getElementById("txtInputAndResult");
//inputString = document.getElementById("txtInputAndResult").value;
document.getElementById("txtInputAndResult").value = "0";

// Input typing catches	
key.addEventListener("keyup", function(event)
{        
  // Number 13 is the "Enter" key on the keyboard
  if (event.keyCode == 13)
  {
    // Cancel the default action, if needed
    event.preventDefault();
    // Trigger the button element with a click
    document.getElementById("btnEquals").click();
  }
  
  if (event.keyCode == 8)
  {
    event.preventDefault();
    document.getElementById("btnClear").click();
  }
  
  if (event.keyCode == 48 || event.keyCode == 96)
  {
    inputString = document.getElementById("txtInputAndResult").value;
    inputString = inputString.substring(0, inputString.length - 1);
    document.getElementById("txtInputAndResult").value = inputString;
    document.getElementById("btnZero").click();
  }
  if (event.keyCode == 49 || event.keyCode == 97)
  {
    inputString = document.getElementById("txtInputAndResult").value;
    inputString = inputString.substring(0, inputString.length - 1);
    document.getElementById("txtInputAndResult").value = inputString;
    document.getElementById("btnOne").click();
  }
  if (event.keyCode == 50 || event.keyCode == 98)
  {
    inputString = document.getElementById("txtInputAndResult").value;
    inputString = inputString.substring(0, inputString.length - 1);
    document.getElementById("txtInputAndResult").value = inputString;
    document.getElementById("btnTwo").click();
  }
  
  if (event.keyCode == 51 || event.keyCode == 99)
  {
    inputString = document.getElementById("txtInputAndResult").value;
    inputString = inputString.substring(0, inputString.length - 1);
    document.getElementById("txtInputAndResult").value = inputString;
    document.getElementById("btnThree").click();
  }
  
  if (event.keyCode == 52 || event.keyCode == 100)
  {
    inputString = document.getElementById("txtInputAndResult").value;
    inputString = inputString.substring(0, inputString.length - 1);
    document.getElementById("txtInputAndResult").value = inputString;
    document.getElementById("btnFour").click();
  }
  if (event.keyCode == 53 || event.keyCode == 101)
  {
    inputString = document.getElementById("txtInputAndResult").value;
    inputString = inputString.substring(0, inputString.length - 1);
    document.getElementById("txtInputAndResult").value = inputString;
    document.getElementById("btnFive").click();
  }
  if (event.keyCode == 54 || event.keyCode == 102)
  {
    inputString = document.getElementById("txtInputAndResult").value;
    inputString = inputString.substring(0, inputString.length - 1);
    document.getElementById("txtInputAndResult").value = inputString;
    document.getElementById("btnSix").click();
  }
  
  if (event.keyCode == 55 || event.keyCode == 103)
  {
    inputString = document.getElementById("txtInputAndResult").value;
    inputString = inputString.substring(0, inputString.length - 1);
    document.getElementById("txtInputAndResult").value = inputString;
    document.getElementById("btnSeven").click();
  }
  
  if (event.keyCode == 56 || event.keyCode == 104)
  {
    inputString = document.getElementById("txtInputAndResult").value;
    inputString = inputString.substring(0, inputString.length - 1);
    document.getElementById("txtInputAndResult").value = inputString;
    document.getElementById("btnEight").click();
  }
  
  if (event.keyCode == 57 || event.keyCode == 105)
  {
    inputString = document.getElementById("txtInputAndResult").value;
    inputString = inputString.substring(0, inputString.length - 1);
    document.getElementById("txtInputAndResult").value = inputString;
    document.getElementById("btnNine").click();
  }
  
  if (event.keyCode == 111)
  {
    inputString = document.getElementById("txtInputAndResult").value;
    inputString = inputString.substring(0, inputString.length - 1);
    document.getElementById("txtInputAndResult").value = inputString;
    document.getElementById("btnDivision").click();
  }
  
  if (event.keyCode == 191)
  {
    inputString = document.getElementById("txtInputAndResult").value;
    inputString = inputString.substring(0, inputString.length - 1);
    document.getElementById("txtInputAndResult").value = inputString;
    document.getElementById("btnDivision").click();
  }
  
  if (event.keyCode == 106)
  {
    inputString = document.getElementById("txtInputAndResult").value;
    inputString = inputString.substring(0, inputString.length - 1);
    document.getElementById("txtInputAndResult").value = inputString;
    document.getElementById("btnMultiplication").click();
  }
  
  if (event.keyCode == 107)
  {
    inputString = document.getElementById("txtInputAndResult").value;
    inputString = inputString.substring(0, inputString.length - 1);
    document.getElementById("txtInputAndResult").value = inputString;
    document.getElementById("btnAddition").click();
  }
  
  if (event.keyCode == 189 || event.keyCode == 109 || event.keyCode == 173)
  {
    inputString = document.getElementById("txtInputAndResult").value;
    inputString = inputString.substring(0, inputString.length - 1);
    document.getElementById("txtInputAndResult").value = inputString;
    document.getElementById("btnSubtraction").click();
  }
  
  if (event.keyCode == 187 || event.keyCode == 61)
  {
    inputString = document.getElementById("txtInputAndResult").value;
    inputString = inputString.substring(0, inputString.length - 1);
    document.getElementById("txtInputAndResult").value = inputString;
    document.getElementById("btnEquals").click();
  }
  
   if (event.keyCode == 190 || event.keyCode == 110 || event.keyCode == 46)
   {
	   event.preventDefault();
      inputString = document.getElementById("txtInputAndResult").value;
      inputString = inputString.substring(0, inputString.length - 1);
      document.getElementById("txtInputAndResult").value = inputString;
      document.getElementById("btnDecimal").click();
	}
	
   if (event.keyCode == 67)
   {
      inputString = document.getElementById("txtInputAndResult").value;
      inputString = inputString.substring(0, inputString.length);
      document.getElementById("txtInputAndResult").value = inputString;
      document.getElementById("btnClear").click();
   }
  
});

function restrictAlphaSymbols()
{
  if ((event.keyCode > 64 && event.keyCode < 91) || (event.keyCode > 96 && event.keyCode < 123) || event.keyCode == 32 || event.keyCode == 44 || event.keyCode == 60 || event.keyCode == 34 || event.keyCode == 39 || (event.keyCode > 57 && event.keyCode < 60) || (event.keyCode > 90 && event.keyCode < 94) || (event.keyCode > 122 && event.keyCode < 126))
  {
    return false;
  }
}

function memoryClear()
{
	document.getElementById("txtInputAndResult").value = "";
	document.getElementById("btnZero").click();
}

function Clear()
{
  let inputString;
  let lastNumber;
  inputString = document.getElementById("txtInputAndResult").value;
  lastNumber = inputString[inputString.length - 1];
  if (lastNumber == " ")
  {
    inputString = inputString.substring(0, inputString.length - 3);
		document.getElementById("txtInputAndResult").select();
		if ((inputString.substring(0, inputString.length)) == "")
		{
			window.location.href = window.location.href;
		}
  }
  else
  {
    inputString = inputString.substring(0, inputString.length - 1);
		document.getElementById("txtInputAndResult").select();
		if ((inputString.substring(0, inputString.length)) == "")
		{
			window.location.href = window.location.href;
 		}
  }  
  document.getElementById("txtInputAndResult").value = inputString;
}

function changeSign()
{
  let inputString;
  let lastNumber;
  let lastNumSlice;
	
  inputString = document.getElementById("txtInputAndResult").value;
  inputString = inputString.split(" ");
  lastNumber = inputString[inputString.length - 1];
  lastNumber = parseFloat(lastNumber);
  if (Number.isNaN(lastNumber))
  {
    lastNumber = "";
    inputString = inputString.join(" ");
    inputString = document.getElementById("txtInputAndResult").value;
    document.getElementById("txtInputAndResult").value = inputString;
    alert("Please enter a number first.");
  }
	
  if (Math.sign(lastNumber) == -1)
  {
    lastNumber = lastNumber * -1;
    lastNumSlice = lastNumber.toString().length;
    lastNumSlice - parseFloat(lastNumSlice);
    inputString = inputString.join(" ");
    inputString = inputString.substring(0, inputString.length - lastNumSlice - 1);
		if (lastNumber == 0)
		{
			inputString = inputString.substring(0, inputString.length - lastNumSlice - 2);
		}
    document.getElementById("txtInputAndResult").value = inputString + lastNumber;
  }
  else
  {
    lastNumber = lastNumber * -1;
    lastNumSlice = lastNumber.toString().length;
    lastNumSlice = parseFloat(lastNumSlice);
    inputString = inputString.join(" ");
    inputString = inputString.substring(0, inputString.length - lastNumSlice + 1);
		if (lastNumber == 0)
		{
			inputString = inputString.substring(0, inputString.length - lastNumSlice - 1);
		}
    document.getElementById("txtInputAndResult").value = inputString + lastNumber;
  }
}

function memoryRecall()
{
  let inputString;
  let lastNumber;
  let lastOperator;
  inputString = document.getElementById("txtInputAndResult").value;
  inputString = inputString.split(" ");
  lastNumber = inputString[inputString.length - 1];
  lastOperator = inputString[inputString.length - 2];
  lastNumber = parseFloat(lastNumber);
  if (Number.isNaN(lastNumber))
  {
    if (lastOperator == "/" || lastOperator == "x" || lastOperator == "-" || lastOperator == "+")
    {
      lastNumber = inputString[inputString.length - 3];
      lastNumber = parseFloat(lastNumber);
    }
    else
    {
      lastNumber = "";
      inputString = inputString.join(" ");
      inputString = document.getElementById("txtInputAndResult").value;
      document.getElementById("txtInputAndResult").value = inputString;
      alert("Please enter a number first.");
    }
  }
  inputString = inputString.join(" ");
  document.getElementById("txtInputAndResult").value = inputString + lastNumber;
}

function memorySubstraction()
{
  let inputString;
  let lastNumber;
  inputString = document.getElementById("txtInputAndResult").value;
  inputString = inputString.split(" ");
  lastNumber = inputString[inputString.length - 1];
	lastOperator = inputString[inputString.length - 2];
  lastNumber = parseFloat(lastNumber);
  if (Number.isNaN(lastNumber))
  {
		if (lastOperator == "/" || lastOperator == "x" || lastOperator == "-" || lastOperator == "+")
    {
      lastNumber = inputString[inputString.length - 3];
      lastNumber = parseFloat(lastNumber);
			inputString = inputString.join(" ");
			inputString = inputString.substring(0, inputString.length - 3);
			document.getElementById("txtInputAndResult").value = inputString + " - " + lastNumber;
		}
		else
		{
			lastNumber = "";
			inputString = inputString.join(" ");
			inputString = document.getElementById("txtInputAndResult").value;
			document.getElementById("txtInputAndResult").value = inputString;
			lastNumber = inputString[inputString.length - 3];
			lastNumber = parseFloat(lastNumber);
			alert("Please enter a number first.");
		}
  }
	inputString = inputString.join(" ");
	document.getElementById("txtInputAndResult").value = inputString + " - " + lastNumber;
}

function memoryAddition()
{
  let inputString;
  let lastNumber;
  inputString = document.getElementById("txtInputAndResult").value;
  inputString = inputString.split(" ");
  lastNumber = inputString[inputString.length - 1];
	lastOperator = inputString[inputString.length - 2];
  lastNumber = parseFloat(lastNumber);
  if (Number.isNaN(lastNumber))
  {
		if (lastOperator == "/" || lastOperator == "x" || lastOperator == "-" || lastOperator == "+")
		{
			lastNumber = inputString[inputString.length - 3];
			lastNumber = parseFloat(lastNumber);
			inputString = inputString.join(" ");
			inputString = inputString.substring(0, inputString.length - 3);
			document.getElementById("txtInputAndResult").value = inputString + " + " + lastNumber;
		}
		else
		{
			lastNumber = "";
			inputString = inputString.join(" ");
			inputString = document.getElementById("txtInputAndResult").value;
			document.getElementById("txtInputAndResult").value = inputString;
			lastNumber = inputString[inputString.length - 3];
			lastNumber = parseFloat(lastNumber);
			alert("Please enter a number first.");
		}
  }
	inputString = inputString.join(" ");
	document.getElementById("txtInputAndResult").value = inputString + " + " + lastNumber;
}

function computeSquareRoot()
{
  let inputString;
  let lastNumber;
	
  inputString = document.getElementById("txtInputAndResult").value;
  inputString = inputString.split(" ");
  lastNumber = inputString[inputString.length - 1];
  lastNumber = parseFloat(lastNumber);
  if (Number.isNaN(lastNumber))
  {
    lastNumber = "";
    inputString = inputString.join(" ");
    inputString = document.getElementById("txtInputAndResult").value;
    alert("Please enter a number first.");
		document.getElementById("txtInputAndResult").value = inputString + lastNumber;
  }
	
	if (Math.sign(lastNumber) == -1)
  {
		lastNumSlice = lastNumber.toString().length;
		alert("Please enter a positive number.");
    lastNumSlice - parseFloat(lastNumSlice);
    inputString = inputString.join(" ");
    inputString = inputString.substring(0, inputString.length - lastNumSlice);
    document.getElementById("txtInputAndResult").value = inputString;
	}
	
  lastNumber = Math.sqrt(lastNumber);
  inputString = inputString.join(" ");
  document.getElementById("txtInputAndResult").value = lastNumber;
}

function computePercentage()
{
  let inputString;
  let lastNumber;
	let lastNumSlice;
	
  inputString = document.getElementById("txtInputAndResult").value;
  inputString = inputString.split(" ");
  lastNumber = inputString[inputString.length - 1];
  lastNumber = parseFloat(lastNumber);
  if (Number.isNaN(lastNumber))
  {
    lastNumber = "";
    inputString = inputString.join(" ");
    inputString = document.getElementById("txtInputAndResult").value;
    document.getElementById("txtInputAndResult").value = inputString + lastNumber;
    alert("Please enter a number first.");
  }
	
	lastNumSlice = lastNumber.toString().length;
  lastNumSlice - parseFloat(lastNumSlice);
	lastNumber = lastNumber / 100;
	inputString = inputString.join(" ");
	inputString = inputString.substring(0, inputString.length - lastNumSlice);
	document.getElementById("txtInputAndResult").value = inputString + lastNumber;
}

function calculate(inputString)
{
  let result;
  let ctr;
  ctr = 0;
  inputString = inputString.split(" ");
  // Parse equation from the left	
  result = inputString[0];
  result = parseFloat(result);
  while (ctr < inputString.length)
  {
    let operand;
    let operator;
    operator = inputString[ctr + 1];
    operand = inputString[ctr + 2];
    operand = parseFloat(operand);
    if (Number.isNaN(result))
    {
      result = 0;
    }
    if (Number.isNaN(operand))
    {
      operand = 0;
    }
    if (operator == "/")
    {
      result = result / operand;
    }
    if (operator == "x")
    {
      result = result * operand;
    }
    if (operator == "-")
    {
      result = result - operand;
    }
    if (operator == "+")
    {
      result = result + operand;
    }
    ctr = ctr + 2;
  }
	
  inputString = inputString.join(" ");
  document.getElementById("txtInputAndResult").value = inputString + result;
}

function displayCalculation(element)
{
  let inputString;
  let elementValue;
  let equals;
  let division;
  let multiplication;
  let addition;
  let subtraction;
  let decimal;
  let lastOperator;
  let lasNum;
  let key;
	let firstNum;
	let secondToLast;
  
  key = document.getElementById("txtInputAndResult");
  division = document.getElementById("btnDivision").value;
  multiplication = document.getElementById("btnMultiplication").value;
  subtraction = document.getElementById("btnSubtraction").value;
  addition = document.getElementById("btnAddition").value;
  decimal = document.getElementById("btnDecimal").value;
	zero = document.getElementById("btnZero").value;
	one = document.getElementById("btnOne").value;
	two = document.getElementById("btnTwo").value;
	three = document.getElementById("btnThree").value;
	four = document.getElementById("btnFour").value;
	five = document.getElementById("btnFive").value;
	six = document.getElementById("btnSix").value;
	seven = document.getElementById("btnSeven").value;
	eight = document.getElementById("btnEight").value;
	nine = document.getElementById("btnNine").value;

  elementValue = element.value;
  document.getElementById("txtInputAndResult").select();
  inputString = document.getElementById("txtInputAndResult").value;
  lastOperator = inputString[inputString.length - 1];
	
	if (lastOperator == zero)  
	{
		inputString = inputString.split(" ");
		lastNumber = inputString[inputString.length - 1];
    //lastNumber = parseFloat(lastNumber);
		inputString = inputString.join(" ");

		if (lastNumber == zero)
		{
			if (elementValue == zero || elementValue == one || elementValue == two || elementValue == three || elementValue == four || elementValue == five || elementValue == six || elementValue == seven || elementValue == eight || elementValue == nine)
			{
				inputString = inputString.substring(0, inputString.length - 1);
				document.getElementById("txtInputAndResult").value = inputString;									
			}
		}	
	}
	
  if (elementValue == decimal)
  {
    inputString = inputString.split(" ");
    lastNumber = inputString[inputString.length - 1];

    if (Number.isNaN(lastNumber))
    {
      inputString = inputString.join(" ");
      lastNumber = "0";
      inputString = inputString + lastNumber;
			document.getElementById("txtInputAndResult").value = inputString;
    }
    else
    {
      inputString = inputString.join(" ");
			document.getElementById("txtInputAndResult").value = inputString;
    }
		
    if (lastOperator == decimal)
    {
      inputString = inputString.substring(0, inputString.length - 1);
			document.getElementById("txtInputAndResult").value = inputString;
    }
		
		lastNumber = lastNumber.split(".");
		if (lastNumber.length > 1)
		{
			return false;
			document.getElementById("txtInputAndResult").select();
		}
  }
	
  if (lastOperator == " ")
  {
    lastOperator = inputString[inputString.length - 2];
  }
	
  if (lastOperator == "/" || lastOperator == "x" || lastOperator == "-" || lastOperator == "+")
  {
    if (elementValue == division || elementValue == multiplication || elementValue == subtraction || elementValue == addition)
    {
      inputString = inputString.substring(0, inputString.length - 3);
			document.getElementById("txtInputAndResult").value = inputString;
    }
  }
	
  inputString = inputString + elementValue;
  document.getElementById("txtInputAndResult").value = inputString;
  equals = document.getElementById("btnEquals").value;
	
  // Call calculate function when input is the equals character " = "
  if (elementValue == equals)
  {
    calculate(inputString);
  }
}
</script>		
</body>
</html>
